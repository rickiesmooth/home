{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _extends from\"@babel/runtime/helpers/extends\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";var _jsxFileName=\"/Users/osdnk/work/navigation-ex/packages/stack/src/views/Stack/StackView.tsx\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import*as React from'react';import Platform from\"react-native-web/dist/exports/Platform\";import{StackActions}from'@react-navigation/routers';import Stack from\"./Stack\";import HeaderContainer from\"../Header/HeaderContainer\";var StackView=function(_React$Component){_inherits(StackView,_React$Component);function StackView(){var _getPrototypeOf2;var _this;_classCallCheck(this,StackView);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(StackView)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={routes:[],opening:[],closing:[],replacing:[],descriptors:{}};_this.getGesturesEnabled=function(_ref){var route=_ref.route;var descriptor=_this.state.descriptors[route.key];if(descriptor){var _descriptor$options=descriptor.options,gestureEnabled=_descriptor$options.gestureEnabled,animationEnabled=_descriptor$options.animationEnabled;if(animationEnabled===false){return false;}return gestureEnabled!==undefined?gestureEnabled:Platform.OS!=='android';}return false;};_this.getPreviousRoute=function(_ref2){var route=_ref2.route;var _this$state=_this.state,closing=_this$state.closing,replacing=_this$state.replacing;var routes=_this.state.routes.filter(function(r){return r.key===route.key||!closing.includes(r.key)&&!replacing.includes(r.key);});var index=routes.findIndex(function(r){return r.key===route.key;});return routes[index-1];};_this.renderScene=function(_ref3){var route=_ref3.route;var descriptor=_this.state.descriptors[route.key]||_this.props.descriptors[route.key];if(!descriptor){return null;}return descriptor.render();};_this.renderHeader=function(props){return React.createElement(HeaderContainer,_extends({},props,{__source:{fileName:_jsxFileName,lineNumber:220}}));};_this.handleGoBack=function(_ref4){var route=_ref4.route;var _this$props=_this.props,state=_this$props.state,navigation=_this$props.navigation;navigation.dispatch(_objectSpread({},StackActions.pop(),{source:route.key,target:state.key}));};_this.handleOpenRoute=function(_ref5){var route=_ref5.route;_this.setState(function(state){return{routes:state.replacing.length?state.routes.filter(function(r){return!state.replacing.includes(r.key);}):state.routes,opening:state.opening.filter(function(key){return key!==route.key;}),closing:state.closing.filter(function(key){return key!==route.key;}),replacing:[]};});};_this.handleCloseRoute=function(_ref6){var route=_ref6.route;_this.setState(function(state){return{routes:state.routes.filter(function(r){return r.key!==route.key;}),opening:state.opening.filter(function(key){return key!==route.key;}),closing:state.closing.filter(function(key){return key!==route.key;})};});};return _this;}_createClass(StackView,[{key:\"render\",value:function render(){var _this$props2=this.props,state=_this$props2.state,navigation=_this$props2.navigation,onPageChangeStart=_this$props2.onPageChangeStart,onPageChangeConfirm=_this$props2.onPageChangeConfirm,onPageChangeCancel=_this$props2.onPageChangeCancel,_this$props2$mode=_this$props2.mode,mode=_this$props2$mode===void 0?'card':_this$props2$mode,rest=_objectWithoutProperties(_this$props2,[\"state\",\"navigation\",\"onPageChangeStart\",\"onPageChangeConfirm\",\"onPageChangeCancel\",\"mode\"]);var _this$state2=this.state,routes=_this$state2.routes,descriptors=_this$state2.descriptors,opening=_this$state2.opening,closing=_this$state2.closing;var headerMode=mode!=='modal'&&Platform.OS==='ios'?'float':'screen';return React.createElement(Stack,_extends({mode:mode,getPreviousRoute:this.getPreviousRoute,getGesturesEnabled:this.getGesturesEnabled,routes:routes,openingRoutes:opening,closingRoutes:closing,onGoBack:this.handleGoBack,onOpenRoute:this.handleOpenRoute,onCloseRoute:this.handleCloseRoute,onPageChangeStart:onPageChangeStart,onPageChangeConfirm:onPageChangeConfirm,onPageChangeCancel:onPageChangeCancel,renderHeader:this.renderHeader,renderScene:this.renderScene,headerMode:headerMode,state:state,navigation:navigation,descriptors:descriptors},rest,{__source:{fileName:_jsxFileName,lineNumber:275}}));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){var routes=props.state.index<props.state.routes.length-1?props.state.routes.slice(0,props.state.index+1):props.state.routes;if(props.state.index<props.state.routes.length-1){console.warn('StackRouter provided invalid state, index should always be the last route in the stack.');}if(!routes.length){throw new Error(\"There should always be at least one route.\");}if(routes===state.routes||!state.routes.length){return{routes:routes,descriptors:props.descriptors};}var opening=state.opening,closing=state.closing,replacing=state.replacing;var previousRoutes=state.routes.filter(function(route){return!closing.includes(route.key)&&!replacing.includes(route.key);});var previousFocusedRoute=previousRoutes[previousRoutes.length-1];var nextFocusedRoute=routes[routes.length-1];if(previousFocusedRoute.key!==nextFocusedRoute.key){var isAnimationEnabled=function isAnimationEnabled(route){var descriptor=props.descriptors[route.key]||state.descriptors[route.key];return descriptor?descriptor.options.animationEnabled!==false:true;};if(!previousRoutes.find(function(r){return r.key===nextFocusedRoute.key;})){if(isAnimationEnabled(nextFocusedRoute)&&!opening.includes(nextFocusedRoute.key)){opening=[].concat(_toConsumableArray(opening),[nextFocusedRoute.key]);closing=closing.filter(function(key){return key!==nextFocusedRoute.key;});replacing=replacing.filter(function(key){return key!==nextFocusedRoute.key;});if(!routes.find(function(r){return r.key===previousFocusedRoute.key;})){replacing=[].concat(_toConsumableArray(replacing),[previousFocusedRoute.key]);opening=opening.filter(function(key){return key!==previousFocusedRoute.key;});closing=closing.filter(function(key){return key!==previousFocusedRoute.key;});routes=routes.slice();routes.splice(routes.length-1,0,previousFocusedRoute);}}}else if(!routes.find(function(r){return r.key===previousFocusedRoute.key;})){if(isAnimationEnabled(previousFocusedRoute)&&!closing.includes(previousFocusedRoute.key)){closing=[].concat(_toConsumableArray(closing),[previousFocusedRoute.key]);opening=opening.filter(function(key){return key!==previousFocusedRoute.key;});replacing=replacing.filter(function(key){return key!==previousFocusedRoute.key;});routes=[].concat(_toConsumableArray(routes),[previousFocusedRoute]);}}else{}}var descriptors=routes.reduce(function(acc,route){acc[route.key]=props.descriptors[route.key]||state.descriptors[route.key];return acc;},{});return{routes:routes,opening:opening,closing:closing,replacing:replacing,descriptors:descriptors};}}]);return StackView;}(React.Component);export default StackView;","map":{"version":3,"sources":["/home/rick/dev/cool-home/node_modules/@react-navigation/stack/lib/module/views/Stack/StackView.js"],"names":["_toConsumableArray","_objectWithoutProperties","_defineProperty","_extends","_classCallCheck","_createClass","_possibleConstructorReturn","_getPrototypeOf","_inherits","_jsxFileName","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","React","StackActions","Stack","HeaderContainer","StackView","_React$Component","_getPrototypeOf2","_this","_len","args","Array","_key","call","concat","state","routes","opening","closing","replacing","descriptors","getGesturesEnabled","_ref","route","descriptor","_descriptor$options","options","gestureEnabled","animationEnabled","undefined","Platform","OS","getPreviousRoute","_ref2","_this$state","r","includes","index","findIndex","renderScene","_ref3","props","render","renderHeader","createElement","__source","fileName","lineNumber","handleGoBack","_ref4","_this$props","navigation","dispatch","pop","handleOpenRoute","_ref5","setState","handleCloseRoute","_ref6","value","_this$props2","onPageChangeStart","onPageChangeConfirm","onPageChangeCancel","_this$props2$mode","mode","rest","_this$state2","headerMode","openingRoutes","closingRoutes","onGoBack","onOpenRoute","onCloseRoute","getDerivedStateFromProps","slice","console","warn","Error","previousRoutes","previousFocusedRoute","nextFocusedRoute","isAnimationEnabled","find","splice","reduce","acc","Component"],"mappings":"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","sourcesContent":["import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _extends from\"@babel/runtime/helpers/extends\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";var _jsxFileName=\"/Users/osdnk/work/navigation-ex/packages/stack/src/views/Stack/StackView.tsx\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import*as React from'react';import{Platform}from'react-native';import{StackActions}from'@react-navigation/routers';import Stack from'./Stack';import HeaderContainer from'../Header/HeaderContainer';var StackView=function(_React$Component){_inherits(StackView,_React$Component);function StackView(){var _getPrototypeOf2;var _this;_classCallCheck(this,StackView);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(StackView)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={routes:[],opening:[],closing:[],replacing:[],descriptors:{}};_this.getGesturesEnabled=function(_ref){var route=_ref.route;var descriptor=_this.state.descriptors[route.key];if(descriptor){var _descriptor$options=descriptor.options,gestureEnabled=_descriptor$options.gestureEnabled,animationEnabled=_descriptor$options.animationEnabled;if(animationEnabled===false){return false;}return gestureEnabled!==undefined?gestureEnabled:Platform.OS!=='android';}return false;};_this.getPreviousRoute=function(_ref2){var route=_ref2.route;var _this$state=_this.state,closing=_this$state.closing,replacing=_this$state.replacing;var routes=_this.state.routes.filter(function(r){return r.key===route.key||!closing.includes(r.key)&&!replacing.includes(r.key);});var index=routes.findIndex(function(r){return r.key===route.key;});return routes[index-1];};_this.renderScene=function(_ref3){var route=_ref3.route;var descriptor=_this.state.descriptors[route.key]||_this.props.descriptors[route.key];if(!descriptor){return null;}return descriptor.render();};_this.renderHeader=function(props){return React.createElement(HeaderContainer,_extends({},props,{__source:{fileName:_jsxFileName,lineNumber:220}}));};_this.handleGoBack=function(_ref4){var route=_ref4.route;var _this$props=_this.props,state=_this$props.state,navigation=_this$props.navigation;navigation.dispatch(_objectSpread({},StackActions.pop(),{source:route.key,target:state.key}));};_this.handleOpenRoute=function(_ref5){var route=_ref5.route;_this.setState(function(state){return{routes:state.replacing.length?state.routes.filter(function(r){return!state.replacing.includes(r.key);}):state.routes,opening:state.opening.filter(function(key){return key!==route.key;}),closing:state.closing.filter(function(key){return key!==route.key;}),replacing:[]};});};_this.handleCloseRoute=function(_ref6){var route=_ref6.route;_this.setState(function(state){return{routes:state.routes.filter(function(r){return r.key!==route.key;}),opening:state.opening.filter(function(key){return key!==route.key;}),closing:state.closing.filter(function(key){return key!==route.key;})};});};return _this;}_createClass(StackView,[{key:\"render\",value:function render(){var _this$props2=this.props,state=_this$props2.state,navigation=_this$props2.navigation,onPageChangeStart=_this$props2.onPageChangeStart,onPageChangeConfirm=_this$props2.onPageChangeConfirm,onPageChangeCancel=_this$props2.onPageChangeCancel,_this$props2$mode=_this$props2.mode,mode=_this$props2$mode===void 0?'card':_this$props2$mode,rest=_objectWithoutProperties(_this$props2,[\"state\",\"navigation\",\"onPageChangeStart\",\"onPageChangeConfirm\",\"onPageChangeCancel\",\"mode\"]);var _this$state2=this.state,routes=_this$state2.routes,descriptors=_this$state2.descriptors,opening=_this$state2.opening,closing=_this$state2.closing;var headerMode=mode!=='modal'&&Platform.OS==='ios'?'float':'screen';return React.createElement(Stack,_extends({mode:mode,getPreviousRoute:this.getPreviousRoute,getGesturesEnabled:this.getGesturesEnabled,routes:routes,openingRoutes:opening,closingRoutes:closing,onGoBack:this.handleGoBack,onOpenRoute:this.handleOpenRoute,onCloseRoute:this.handleCloseRoute,onPageChangeStart:onPageChangeStart,onPageChangeConfirm:onPageChangeConfirm,onPageChangeCancel:onPageChangeCancel,renderHeader:this.renderHeader,renderScene:this.renderScene,headerMode:headerMode,state:state,navigation:navigation,descriptors:descriptors},rest,{__source:{fileName:_jsxFileName,lineNumber:275}}));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){var routes=props.state.index<props.state.routes.length-1?props.state.routes.slice(0,props.state.index+1):props.state.routes;if(props.state.index<props.state.routes.length-1){console.warn('StackRouter provided invalid state, index should always be the last route in the stack.');}if(!routes.length){throw new Error(\"There should always be at least one route.\");}if(routes===state.routes||!state.routes.length){return{routes:routes,descriptors:props.descriptors};}var opening=state.opening,closing=state.closing,replacing=state.replacing;var previousRoutes=state.routes.filter(function(route){return!closing.includes(route.key)&&!replacing.includes(route.key);});var previousFocusedRoute=previousRoutes[previousRoutes.length-1];var nextFocusedRoute=routes[routes.length-1];if(previousFocusedRoute.key!==nextFocusedRoute.key){var isAnimationEnabled=function isAnimationEnabled(route){var descriptor=props.descriptors[route.key]||state.descriptors[route.key];return descriptor?descriptor.options.animationEnabled!==false:true;};if(!previousRoutes.find(function(r){return r.key===nextFocusedRoute.key;})){if(isAnimationEnabled(nextFocusedRoute)&&!opening.includes(nextFocusedRoute.key)){opening=[].concat(_toConsumableArray(opening),[nextFocusedRoute.key]);closing=closing.filter(function(key){return key!==nextFocusedRoute.key;});replacing=replacing.filter(function(key){return key!==nextFocusedRoute.key;});if(!routes.find(function(r){return r.key===previousFocusedRoute.key;})){replacing=[].concat(_toConsumableArray(replacing),[previousFocusedRoute.key]);opening=opening.filter(function(key){return key!==previousFocusedRoute.key;});closing=closing.filter(function(key){return key!==previousFocusedRoute.key;});routes=routes.slice();routes.splice(routes.length-1,0,previousFocusedRoute);}}}else if(!routes.find(function(r){return r.key===previousFocusedRoute.key;})){if(isAnimationEnabled(previousFocusedRoute)&&!closing.includes(previousFocusedRoute.key)){closing=[].concat(_toConsumableArray(closing),[previousFocusedRoute.key]);opening=opening.filter(function(key){return key!==previousFocusedRoute.key;});replacing=replacing.filter(function(key){return key!==previousFocusedRoute.key;});routes=[].concat(_toConsumableArray(routes),[previousFocusedRoute]);}}else{}}var descriptors=routes.reduce(function(acc,route){acc[route.key]=props.descriptors[route.key]||state.descriptors[route.key];return acc;},{});return{routes:routes,opening:opening,closing:closing,replacing:replacing,descriptors:descriptors};}}]);return StackView;}(React.Component);export default StackView;\n//# sourceMappingURL=StackView.js.map"]},"metadata":{},"sourceType":"module"}