{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import{ACTION_TYPES}from\"./interfaces\";import{Thing}from\"./models\";import API from\"../../utils/api\";export var useActions=function useActions(_state,dispatch){var updateThing=function updateThing(updatedThing){dispatch({type:ACTION_TYPES.PROPERTIES_UPDATE,data:_objectSpread({},updatedThing)});};return{login:function login(data){dispatch({type:ACTION_TYPES.USER_LOGIN,data:data});},initThings:function initThings(){var _ref,data,error;return _regeneratorRuntime.async(function initThings$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(API.things());case 2:_ref=_context.sent;data=_ref.data;error=_ref.error;dispatch({type:ACTION_TYPES.THINGS_INIT,data:_objectSpread({},data&&{things:data.map(function(raw){return new Thing(raw,updateThing);})},{},error&&{error:error.message})});case 6:case\"end\":return _context.stop();}}});},updateThing:updateThing};};","map":{"version":3,"sources":["/home/rick/dev/cool-home/src/store/things/actions.ts"],"names":["ACTION_TYPES","Thing","API","useActions","_state","dispatch","updateThing","updatedThing","type","PROPERTIES_UPDATE","data","login","USER_LOGIN","initThings","things","error","THINGS_INIT","map","raw","message"],"mappings":"24BAAA,OAAwBA,YAAxB,oBACA,OAASC,KAAT,gBACA,MAAOC,CAAAA,GAAP,uBAEA,MAAO,IAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,MAAD,CAAgBC,QAAhB,CAAqD,CAC7E,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,YAAD,CAA8B,CAChDF,QAAQ,CAAC,CACPG,IAAI,CAAER,YAAY,CAACS,iBADZ,CAEPC,IAAI,kBACCH,YADD,CAFG,CAAD,CAAR,CAMD,CAPD,CASA,MAAO,CACLI,KAAK,CAAE,eAACD,IAAD,CAAmB,CACxBL,QAAQ,CAAC,CACPG,IAAI,CAAER,YAAY,CAACY,UADZ,CAEPF,IAAI,CAAJA,IAFO,CAAD,CAAR,CAID,CANI,CAOLG,UAAU,CAAE,+MACoBX,GAAG,CAACY,MAAJ,EADpB,4BACFJ,IADE,MACFA,IADE,CACIK,KADJ,MACIA,KADJ,CAGVV,QAAQ,CAAC,CACPG,IAAI,CAAER,YAAY,CAACgB,WADZ,CAEPN,IAAI,kBACEA,IAAI,EAAI,CACVI,MAAM,CAAEJ,IAAI,CAACO,GAAL,CAAS,SAAAC,GAAG,QAAI,IAAIjB,CAAAA,KAAJ,CAAUiB,GAAV,CAAeZ,WAAf,CAAJ,EAAZ,CADE,CADV,IAIES,KAAK,EAAI,CAAEA,KAAK,CAAEA,KAAK,CAACI,OAAf,CAJX,CAFG,CAAD,CAAR,CAHU,8CAPP,CAoBLb,WAAW,CAAXA,WApBK,CAAP,CAsBD,CAhCM","sourcesContent":["import { Action, State, ACTION_TYPES, ThingModel } from \"./interfaces\";\nimport { Thing } from \"./models\";\nimport API from \"../../utils/api\";\n\nexport const useActions = (_state: State, dispatch: React.Dispatch<Action>) => {\n  const updateThing = (updatedThing: ThingModel) => {\n    dispatch({\n      type: ACTION_TYPES.PROPERTIES_UPDATE,\n      data: {\n        ...updatedThing\n      }\n    });\n  };\n\n  return {\n    login: (data: boolean) => {\n      dispatch({\n        type: ACTION_TYPES.USER_LOGIN,\n        data\n      });\n    },\n    initThings: async function() {\n      const { data, error } = await API.things();\n\n      dispatch({\n        type: ACTION_TYPES.THINGS_INIT,\n        data: {\n          ...(data && {\n            things: data.map(raw => new Thing(raw, updateThing))\n          }),\n          ...(error && { error: error.message })\n        }\n      });\n    },\n    updateThing\n  };\n};\n"]},"metadata":{},"sourceType":"module"}