{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import invariant from'invariant';import NativeEventEmitter from\"react-native-web/dist/exports/NativeEventEmitter\";import Platform from\"react-native-web/dist/exports/Platform\";var nativeEmitterSubscriptionKey='@@nativeEmitterSubscription@@';export var EventEmitter=function(){function EventEmitter(nativeModule){_classCallCheck(this,EventEmitter);this._listenerCount=0;this._nativeModule=nativeModule;this._eventEmitter=new NativeEventEmitter(nativeModule);}_createClass(EventEmitter,[{key:\"addListener\",value:function addListener(eventName,listener){var _this=this,_subscription;if(!this._listenerCount&&Platform.OS!=='ios'&&this._nativeModule.startObserving){this._nativeModule.startObserving();}this._listenerCount++;var nativeEmitterSubscription=this._eventEmitter.addListener(eventName,listener);var subscription=(_subscription={},_defineProperty(_subscription,nativeEmitterSubscriptionKey,nativeEmitterSubscription),_defineProperty(_subscription,\"remove\",function remove(){_this.removeSubscription(subscription);}),_subscription);return subscription;}},{key:\"removeAllListeners\",value:function removeAllListeners(eventName){var removedListenerCount=this._eventEmitter.listeners(eventName).length;this._eventEmitter.removeAllListeners(eventName);this._listenerCount-=removedListenerCount;invariant(this._listenerCount>=0,\"EventEmitter must have a non-negative number of listeners\");if(!this._listenerCount&&Platform.OS!=='ios'&&this._nativeModule.stopObserving){this._nativeModule.stopObserving();}}},{key:\"removeSubscription\",value:function removeSubscription(subscription){var nativeEmitterSubscription=subscription[nativeEmitterSubscriptionKey];if(!nativeEmitterSubscription){return;}this._eventEmitter.removeSubscription(nativeEmitterSubscription);this._listenerCount--;delete subscription[nativeEmitterSubscriptionKey];subscription.remove=function(){};if(!this._listenerCount&&Platform.OS!=='ios'&&this._nativeModule.stopObserving){this._nativeModule.stopObserving();}}},{key:\"emit\",value:function emit(eventName){var _this$_eventEmitter;for(var _len=arguments.length,params=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){params[_key-1]=arguments[_key];}(_this$_eventEmitter=this._eventEmitter).emit.apply(_this$_eventEmitter,[eventName].concat(params));}}]);return EventEmitter;}();","map":{"version":3,"sources":["/home/rick/dev/cool-home/node_modules/@unimodules/react-native-adapter/build/EventEmitter.js"],"names":["invariant","nativeEmitterSubscriptionKey","EventEmitter","nativeModule","_listenerCount","_nativeModule","_eventEmitter","NativeEventEmitter","eventName","listener","Platform","OS","startObserving","nativeEmitterSubscription","addListener","subscription","removeSubscription","removedListenerCount","listeners","length","removeAllListeners","stopObserving","remove","params","emit"],"mappings":"mMAAA,MAAOA,CAAAA,SAAP,KAAsB,WAAtB,C,8IAEA,GAAMC,CAAAA,4BAA4B,CAAG,+BAArC,CACA,UAAaC,CAAAA,YAAb,YACI,sBAAYC,YAAZ,CAA0B,oCACtB,KAAKC,cAAL,CAAsB,CAAtB,CACA,KAAKC,aAAL,CAAqBF,YAArB,CACA,KAAKG,aAAL,CAAqB,GAAIC,CAAAA,kBAAJ,CAAuBJ,YAAvB,CAArB,CACH,CALL,yEAMgBK,SANhB,CAM2BC,QAN3B,CAMqC,8BAC7B,GAAI,CAAC,KAAKL,cAAN,EAAwBM,QAAQ,CAACC,EAAT,GAAgB,KAAxC,EAAiD,KAAKN,aAAL,CAAmBO,cAAxE,CAAwF,CACpF,KAAKP,aAAL,CAAmBO,cAAnB,GACH,CACD,KAAKR,cAAL,GACA,GAAMS,CAAAA,yBAAyB,CAAG,KAAKP,aAAL,CAAmBQ,WAAnB,CAA+BN,SAA/B,CAA0CC,QAA1C,CAAlC,CACA,GAAMM,CAAAA,YAAY,iDACbd,4BADa,CACkBY,yBADlB,yCAEN,iBAAM,CACV,KAAI,CAACG,kBAAL,CAAwBD,YAAxB,EACH,CAJa,gBAAlB,CAMA,MAAOA,CAAAA,YAAP,CACH,CAnBL,8DAoBuBP,SApBvB,CAoBkC,CAC1B,GAAMS,CAAAA,oBAAoB,CAAG,KAAKX,aAAL,CAAmBY,SAAnB,CAA6BV,SAA7B,EAAwCW,MAArE,CACA,KAAKb,aAAL,CAAmBc,kBAAnB,CAAsCZ,SAAtC,EACA,KAAKJ,cAAL,EAAuBa,oBAAvB,CACAjB,SAAS,CAAC,KAAKI,cAAL,EAAuB,CAAxB,6DAAT,CACA,GAAI,CAAC,KAAKA,cAAN,EAAwBM,QAAQ,CAACC,EAAT,GAAgB,KAAxC,EAAiD,KAAKN,aAAL,CAAmBgB,aAAxE,CAAuF,CACnF,KAAKhB,aAAL,CAAmBgB,aAAnB,GACH,CACJ,CA5BL,8DA6BuBN,YA7BvB,CA6BqC,CAC7B,GAAMF,CAAAA,yBAAyB,CAAGE,YAAY,CAACd,4BAAD,CAA9C,CACA,GAAI,CAACY,yBAAL,CAAgC,CAC5B,OACH,CACD,KAAKP,aAAL,CAAmBU,kBAAnB,CAAsCH,yBAAtC,EACA,KAAKT,cAAL,GAGA,MAAOW,CAAAA,YAAY,CAACd,4BAAD,CAAnB,CAEAc,YAAY,CAACO,MAAb,CAAsB,UAAM,CAAG,CAA/B,CACA,GAAI,CAAC,KAAKlB,cAAN,EAAwBM,QAAQ,CAACC,EAAT,GAAgB,KAAxC,EAAiD,KAAKN,aAAL,CAAmBgB,aAAxE,CAAuF,CACnF,KAAKhB,aAAL,CAAmBgB,aAAnB,GACH,CACJ,CA5CL,kCA6CSb,SA7CT,CA6C+B,uDAARe,MAAQ,qDAARA,MAAQ,0BACvB,0BAAKjB,aAAL,EAAmBkB,IAAnB,4BAAwBhB,SAAxB,SAAsCe,MAAtC,GACH,CA/CL","sourcesContent":["import invariant from 'invariant';\nimport { NativeEventEmitter, Platform } from 'react-native';\nconst nativeEmitterSubscriptionKey = '@@nativeEmitterSubscription@@';\nexport class EventEmitter {\n    constructor(nativeModule) {\n        this._listenerCount = 0;\n        this._nativeModule = nativeModule;\n        this._eventEmitter = new NativeEventEmitter(nativeModule);\n    }\n    addListener(eventName, listener) {\n        if (!this._listenerCount && Platform.OS !== 'ios' && this._nativeModule.startObserving) {\n            this._nativeModule.startObserving();\n        }\n        this._listenerCount++;\n        const nativeEmitterSubscription = this._eventEmitter.addListener(eventName, listener);\n        const subscription = {\n            [nativeEmitterSubscriptionKey]: nativeEmitterSubscription,\n            remove: () => {\n                this.removeSubscription(subscription);\n            },\n        };\n        return subscription;\n    }\n    removeAllListeners(eventName) {\n        const removedListenerCount = this._eventEmitter.listeners(eventName).length;\n        this._eventEmitter.removeAllListeners(eventName);\n        this._listenerCount -= removedListenerCount;\n        invariant(this._listenerCount >= 0, `EventEmitter must have a non-negative number of listeners`);\n        if (!this._listenerCount && Platform.OS !== 'ios' && this._nativeModule.stopObserving) {\n            this._nativeModule.stopObserving();\n        }\n    }\n    removeSubscription(subscription) {\n        const nativeEmitterSubscription = subscription[nativeEmitterSubscriptionKey];\n        if (!nativeEmitterSubscription) {\n            return;\n        }\n        this._eventEmitter.removeSubscription(nativeEmitterSubscription);\n        this._listenerCount--;\n        // Ensure that the emitter's internal state remains correct even if `removeSubscription` is\n        // called again with the same subscription\n        delete subscription[nativeEmitterSubscriptionKey];\n        // Release closed-over references to the emitter\n        subscription.remove = () => { };\n        if (!this._listenerCount && Platform.OS !== 'ios' && this._nativeModule.stopObserving) {\n            this._nativeModule.stopObserving();\n        }\n    }\n    emit(eventName, ...params) {\n        this._eventEmitter.emit(eventName, ...params);\n    }\n}\n//# sourceMappingURL=EventEmitter.js.map"]},"metadata":{},"sourceType":"module"}