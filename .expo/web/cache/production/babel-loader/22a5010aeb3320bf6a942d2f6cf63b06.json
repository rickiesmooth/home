{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import*as React from'react';import{NavigationStateContext}from\"./NavigationContainer\";import NavigationRouteContext from\"./NavigationRouteContext\";import Screen from\"./Screen\";import{navigate}from\"./CommonActions\";import useEventEmitter from\"./useEventEmitter\";import useRegisterNavigator from\"./useRegisterNavigator\";import useDescriptors from\"./useDescriptors\";import useNavigationHelpers from\"./useNavigationHelpers\";import useOnAction from\"./useOnAction\";import useFocusEvents from\"./useFocusEvents\";import useOnRouteFocus from\"./useOnRouteFocus\";import useChildActionListeners from\"./useChildActionListeners\";import useFocusedListeners from\"./useFocusedListeners\";import useFocusedListenersChildrenAdapter from\"./useFocusedListenersChildrenAdapter\";import{PrivateValueStore}from\"./types\";import useStateGetters from\"./useStateGetters\";import useOnGetState from\"./useOnGetState\";PrivateValueStore;var isArrayEqual=function isArrayEqual(a,b){return a.length===b.length&&a.every(function(it,index){return it===b[index];});};var getRouteConfigsFromChildren=function getRouteConfigsFromChildren(children){return React.Children.toArray(children).reduce(function(acc,child){if(React.isValidElement(child)){if(child.type===Screen){acc.push(child.props);return acc;}if(child.type===React.Fragment){acc.push.apply(acc,_toConsumableArray(getRouteConfigsFromChildren(child.props.children)));return acc;}}throw new Error(\"A navigator can only contain 'Screen' components as its direct children (found '\"+(child.type&&child.type.name?child.type.name:String(child))+\"')\");},[]);};export default function useNavigationBuilder(createRouter,options){useRegisterNavigator();var route=React.useContext(NavigationRouteContext);var previousRouteRef=React.useRef(route);React.useEffect(function(){previousRouteRef.current=route;},[route]);var children=options.children,rest=_objectWithoutProperties(options,[\"children\"]);var _React$useRef=React.useRef(createRouter(_objectSpread({},rest,{},route&&route.params&&typeof route.params.screen==='string'?{initialRouteName:route.params.screen}:null))),router=_React$useRef.current;var screens=getRouteConfigsFromChildren(children).reduce(function(acc,curr){if(curr.name in acc){throw new Error(\"A navigator cannot contain multiple 'Screen' components with the same name (found duplicate screen named '\"+curr.name+\"')\");}acc[curr.name]=curr;return acc;},{});var routeNames=Object.keys(screens);var routeParamList=routeNames.reduce(function(acc,curr){var initialParams=screens[curr].initialParams;var initialParamsFromParams=route&&route.params&&route.params.screen===curr?route.params.params:undefined;acc[curr]=initialParams!==undefined||initialParamsFromParams!==undefined?_objectSpread({},initialParams,{},initialParamsFromParams):undefined;return acc;},{});if(!routeNames.length){throw new Error(\"Couldn't find any screens for the navigator. Have you defined any screens as its children?\");}var isStateValid=React.useCallback(function(state){return state.type===undefined||state.type===router.type;},[router.type]);var isStateInitialized=React.useCallback(function(state){return state!==undefined&&state.stale===false&&isStateValid(state);},[isStateValid]);var _React$useContext=React.useContext(NavigationStateContext),currentState=_React$useContext.state,getCurrentState=_React$useContext.getState,setState=_React$useContext.setState,key=_React$useContext.key,performTransaction=_React$useContext.performTransaction;var previousStateRef=React.useRef();var initializedStateRef=React.useRef();if(initializedStateRef.current===undefined||currentState!==previousStateRef.current){initializedStateRef.current=currentState===undefined||!isStateValid(currentState)?router.getInitialState({routeNames:routeNames,routeParamList:routeParamList}):router.getRehydratedState(currentState,{routeNames:routeNames,routeParamList:routeParamList});}React.useEffect(function(){previousStateRef.current=currentState;},[currentState]);var state=isStateInitialized(currentState)?currentState:initializedStateRef.current;var nextState=state;if(!isArrayEqual(state.routeNames,routeNames)){nextState=router.getStateForRouteNamesChange(state,{routeNames:routeNames,routeParamList:routeParamList});}if(previousRouteRef.current&&route&&route.params&&typeof route.params.screen==='string'&&route.params!==previousRouteRef.current.params){var updatedState=router.getStateForAction(state,navigate(route.params.screen,route.params.params));nextState=updatedState!==null?router.getRehydratedState(updatedState,{routeNames:routeNames,routeParamList:routeParamList}):state;}if(state!==nextState){performTransaction(function(){setState(nextState);});}state=nextState;React.useEffect(function(){return function(){performTransaction(function(){return getCurrentState()!==undefined&&setState(undefined);});};},[]);var getState=React.useCallback(function(){var currentState=getCurrentState();return isStateInitialized(currentState)?currentState:initializedStateRef.current;},[getCurrentState,isStateInitialized]);var emitter=useEventEmitter();useFocusEvents({state:state,emitter:emitter});var _useChildActionListen=useChildActionListeners(),actionListeners=_useChildActionListen.listeners,addActionListener=_useChildActionListen.addListener;var _useFocusedListeners=useFocusedListeners(),focusedListeners=_useFocusedListeners.listeners,addFocusedListener=_useFocusedListeners.addListener;var _useStateGetters=useStateGetters(),getStateForRoute=_useStateGetters.getStateForRoute,addStateGetter=_useStateGetters.addStateGetter;var onAction=useOnAction({router:router,getState:getState,setState:setState,key:key,listeners:actionListeners});var onRouteFocus=useOnRouteFocus({router:router,key:key,getState:getState,setState:setState});var navigation=useNavigationHelpers({onAction:onAction,getState:getState,emitter:emitter,router:router});useFocusedListenersChildrenAdapter({navigation:navigation,focusedListeners:focusedListeners});useOnGetState({getState:getState,getStateForRoute:getStateForRoute});var descriptors=useDescriptors({state:state,screens:screens,navigation:navigation,screenOptions:options.screenOptions,onAction:onAction,getState:getState,setState:setState,onRouteFocus:onRouteFocus,addActionListener:addActionListener,addFocusedListener:addFocusedListener,addStateGetter:addStateGetter,router:router,emitter:emitter});return{state:state,navigation:navigation,descriptors:descriptors};}","map":{"version":3,"sources":["/home/rick/dev/cool-home/node_modules/@react-navigation/core/lib/module/useNavigationBuilder.js"],"names":["_defineProperty","_objectWithoutProperties","_toConsumableArray","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","React","NavigationStateContext","NavigationRouteContext","Screen","navigate","useEventEmitter","useRegisterNavigator","useDescriptors","useNavigationHelpers","useOnAction","useFocusEvents","useOnRouteFocus","useChildActionListeners","useFocusedListeners","useFocusedListenersChildrenAdapter","PrivateValueStore","useStateGetters","useOnGetState","isArrayEqual","a","b","every","it","index","getRouteConfigsFromChildren","children","Children","toArray","reduce","acc","child","isValidElement","type","props","Fragment","Error","name","String","useNavigationBuilder","createRouter","options","route","useContext","previousRouteRef","useRef","useEffect","current","rest","_React$useRef","params","screen","initialRouteName","router","screens","curr","routeNames","routeParamList","initialParams","initialParamsFromParams","undefined","isStateValid","useCallback","state","isStateInitialized","stale","_React$useContext","currentState","getCurrentState","getState","setState","performTransaction","previousStateRef","initializedStateRef","getInitialState","getRehydratedState","nextState","getStateForRouteNamesChange","updatedState","getStateForAction","emitter","_useChildActionListen","actionListeners","listeners","addActionListener","addListener","_useFocusedListeners","focusedListeners","addFocusedListener","_useStateGetters","getStateForRoute","addStateGetter","onAction","onRouteFocus","navigation","descriptors","screenOptions"],"mappings":"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","sourcesContent":["import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import*as React from'react';import{NavigationStateContext}from'./NavigationContainer';import NavigationRouteContext from'./NavigationRouteContext';import Screen from'./Screen';import{navigate}from'./CommonActions';import useEventEmitter from'./useEventEmitter';import useRegisterNavigator from'./useRegisterNavigator';import useDescriptors from'./useDescriptors';import useNavigationHelpers from'./useNavigationHelpers';import useOnAction from'./useOnAction';import useFocusEvents from'./useFocusEvents';import useOnRouteFocus from'./useOnRouteFocus';import useChildActionListeners from'./useChildActionListeners';import useFocusedListeners from'./useFocusedListeners';import useFocusedListenersChildrenAdapter from'./useFocusedListenersChildrenAdapter';import{PrivateValueStore}from'./types';import useStateGetters from'./useStateGetters';import useOnGetState from'./useOnGetState';PrivateValueStore;var isArrayEqual=function isArrayEqual(a,b){return a.length===b.length&&a.every(function(it,index){return it===b[index];});};var getRouteConfigsFromChildren=function getRouteConfigsFromChildren(children){return React.Children.toArray(children).reduce(function(acc,child){if(React.isValidElement(child)){if(child.type===Screen){acc.push(child.props);return acc;}if(child.type===React.Fragment){acc.push.apply(acc,_toConsumableArray(getRouteConfigsFromChildren(child.props.children)));return acc;}}throw new Error(\"A navigator can only contain 'Screen' components as its direct children (found '\"+(child.type&&child.type.name?child.type.name:String(child))+\"')\");},[]);};export default function useNavigationBuilder(createRouter,options){useRegisterNavigator();var route=React.useContext(NavigationRouteContext);var previousRouteRef=React.useRef(route);React.useEffect(function(){previousRouteRef.current=route;},[route]);var children=options.children,rest=_objectWithoutProperties(options,[\"children\"]);var _React$useRef=React.useRef(createRouter(_objectSpread({},rest,{},route&&route.params&&typeof route.params.screen==='string'?{initialRouteName:route.params.screen}:null))),router=_React$useRef.current;var screens=getRouteConfigsFromChildren(children).reduce(function(acc,curr){if(curr.name in acc){throw new Error(\"A navigator cannot contain multiple 'Screen' components with the same name (found duplicate screen named '\"+curr.name+\"')\");}acc[curr.name]=curr;return acc;},{});var routeNames=Object.keys(screens);var routeParamList=routeNames.reduce(function(acc,curr){var initialParams=screens[curr].initialParams;var initialParamsFromParams=route&&route.params&&route.params.screen===curr?route.params.params:undefined;acc[curr]=initialParams!==undefined||initialParamsFromParams!==undefined?_objectSpread({},initialParams,{},initialParamsFromParams):undefined;return acc;},{});if(!routeNames.length){throw new Error(\"Couldn't find any screens for the navigator. Have you defined any screens as its children?\");}var isStateValid=React.useCallback(function(state){return state.type===undefined||state.type===router.type;},[router.type]);var isStateInitialized=React.useCallback(function(state){return state!==undefined&&state.stale===false&&isStateValid(state);},[isStateValid]);var _React$useContext=React.useContext(NavigationStateContext),currentState=_React$useContext.state,getCurrentState=_React$useContext.getState,setState=_React$useContext.setState,key=_React$useContext.key,performTransaction=_React$useContext.performTransaction;var previousStateRef=React.useRef();var initializedStateRef=React.useRef();if(initializedStateRef.current===undefined||currentState!==previousStateRef.current){initializedStateRef.current=currentState===undefined||!isStateValid(currentState)?router.getInitialState({routeNames:routeNames,routeParamList:routeParamList}):router.getRehydratedState(currentState,{routeNames:routeNames,routeParamList:routeParamList});}React.useEffect(function(){previousStateRef.current=currentState;},[currentState]);var state=isStateInitialized(currentState)?currentState:initializedStateRef.current;var nextState=state;if(!isArrayEqual(state.routeNames,routeNames)){nextState=router.getStateForRouteNamesChange(state,{routeNames:routeNames,routeParamList:routeParamList});}if(previousRouteRef.current&&route&&route.params&&typeof route.params.screen==='string'&&route.params!==previousRouteRef.current.params){var updatedState=router.getStateForAction(state,navigate(route.params.screen,route.params.params));nextState=updatedState!==null?router.getRehydratedState(updatedState,{routeNames:routeNames,routeParamList:routeParamList}):state;}if(state!==nextState){performTransaction(function(){setState(nextState);});}state=nextState;React.useEffect(function(){return function(){performTransaction(function(){return getCurrentState()!==undefined&&setState(undefined);});};},[]);var getState=React.useCallback(function(){var currentState=getCurrentState();return isStateInitialized(currentState)?currentState:initializedStateRef.current;},[getCurrentState,isStateInitialized]);var emitter=useEventEmitter();useFocusEvents({state:state,emitter:emitter});var _useChildActionListen=useChildActionListeners(),actionListeners=_useChildActionListen.listeners,addActionListener=_useChildActionListen.addListener;var _useFocusedListeners=useFocusedListeners(),focusedListeners=_useFocusedListeners.listeners,addFocusedListener=_useFocusedListeners.addListener;var _useStateGetters=useStateGetters(),getStateForRoute=_useStateGetters.getStateForRoute,addStateGetter=_useStateGetters.addStateGetter;var onAction=useOnAction({router:router,getState:getState,setState:setState,key:key,listeners:actionListeners});var onRouteFocus=useOnRouteFocus({router:router,key:key,getState:getState,setState:setState});var navigation=useNavigationHelpers({onAction:onAction,getState:getState,emitter:emitter,router:router});useFocusedListenersChildrenAdapter({navigation:navigation,focusedListeners:focusedListeners});useOnGetState({getState:getState,getStateForRoute:getStateForRoute});var descriptors=useDescriptors({state:state,screens:screens,navigation:navigation,screenOptions:options.screenOptions,onAction:onAction,getState:getState,setState:setState,onRouteFocus:onRouteFocus,addActionListener:addActionListener,addFocusedListener:addFocusedListener,addStateGetter:addStateGetter,router:router,emitter:emitter});return{state:state,navigation:navigation,descriptors:descriptors};}\n//# sourceMappingURL=useNavigationBuilder.js.map"]},"metadata":{},"sourceType":"module"}