{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";import _extends from\"@babel/runtime/helpers/extends\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";var _jsxFileName=\"/Users/osdnk/work/navigation-ex/packages/stack/src/views/Stack/Stack.tsx\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import*as React from'react';import View from\"react-native-web/dist/exports/View\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import Platform from\"react-native-web/dist/exports/Platform\";import Animated from'react-native-reanimated';import*as Screens from'react-native-screens';import{getDefaultHeaderHeight}from\"../Header/HeaderSegment\";import StackItem from\"./StackItem\";import{DefaultTransition,ModalTransition}from\"../../TransitionConfigs/TransitionPresets\";import{forNoAnimation}from\"../../TransitionConfigs/HeaderStyleInterpolators\";var dimensions=Dimensions.get('window');var layout={width:dimensions.width,height:dimensions.height};var AnimatedScreen;var MaybeScreenContainer=function MaybeScreenContainer(_ref){var enabled=_ref.enabled,rest=_objectWithoutProperties(_ref,[\"enabled\"]);if(Platform.OS!=='ios'&&enabled&&Screens.screensEnabled()){return React.createElement(Screens.ScreenContainer,_extends({},rest,{__source:{fileName:_jsxFileName,lineNumber:84}}));}return React.createElement(View,_extends({},rest,{__source:{fileName:_jsxFileName,lineNumber:87}}));};var MaybeScreen=function MaybeScreen(_ref2){var enabled=_ref2.enabled,active=_ref2.active,rest=_objectWithoutProperties(_ref2,[\"enabled\",\"active\"]);if(Platform.OS!=='ios'&&enabled&&Screens.screensEnabled()){AnimatedScreen=AnimatedScreen||Animated.createAnimatedComponent(Screens.NativeScreen);return React.createElement(AnimatedScreen,_extends({active:active},rest,{__source:{fileName:_jsxFileName,lineNumber:103}}));}return React.createElement(View,_extends({},rest,{__source:{fileName:_jsxFileName,lineNumber:106}}));};var cond=Animated.cond,eq=Animated.eq;var ANIMATED_ONE=new Animated.Value(1);var FALLBACK_DESCRIPTOR=Object.freeze({options:{}});var getFloatingHeaderHeights=function getFloatingHeaderHeights(routes,layout,previous){var defaultHeaderHeight=getDefaultHeaderHeight(layout);return routes.reduce(function(acc,curr){acc[curr.key]=previous[curr.key]||defaultHeaderHeight;return acc;},{});};var Stack=function(_React$Component){_inherits(Stack,_React$Component);function Stack(){var _getPrototypeOf2;var _this;_classCallCheck(this,Stack);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Stack)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={routes:[],scenes:[],progress:{},layout:layout,descriptors:_this.props.descriptors,floatingHeaderHeights:{}};_this.handleLayout=function(e){var _e$nativeEvent$layout=e.nativeEvent.layout,height=_e$nativeEvent$layout.height,width=_e$nativeEvent$layout.width;if(height===_this.state.layout.height&&width===_this.state.layout.width){return;}var layout={width:width,height:height};_this.setState({layout:layout,floatingHeaderHeights:getFloatingHeaderHeights(_this.props.routes,layout,{})});};_this.handleFloatingHeaderLayout=function(_ref3){var route=_ref3.route,height=_ref3.height;var previousHeight=_this.state.floatingHeaderHeights[route.key];if(previousHeight&&previousHeight===height){return;}_this.setState(function(state){return{floatingHeaderHeights:_objectSpread({},state.floatingHeaderHeights,_defineProperty({},route.key,height))};});};_this.handleTransitionStart=function(_ref4,closing){var route=_ref4.route;return _this.props.navigation.emit({type:'transitionStart',data:{closing:closing},target:route.key});};_this.handleTransitionEnd=function(_ref5,closing){var route=_ref5.route;return _this.props.navigation.emit({type:'transitionEnd',data:{closing:closing},target:route.key});};return _this;}_createClass(Stack,[{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,mode=_this$props.mode,descriptors=_this$props.descriptors,state=_this$props.state,navigation=_this$props.navigation,routes=_this$props.routes,closingRoutes=_this$props.closingRoutes,onOpenRoute=_this$props.onOpenRoute,onCloseRoute=_this$props.onCloseRoute,onGoBack=_this$props.onGoBack,getPreviousRoute=_this$props.getPreviousRoute,getGesturesEnabled=_this$props.getGesturesEnabled,renderHeader=_this$props.renderHeader,renderScene=_this$props.renderScene,headerMode=_this$props.headerMode,onPageChangeStart=_this$props.onPageChangeStart,onPageChangeConfirm=_this$props.onPageChangeConfirm,onPageChangeCancel=_this$props.onPageChangeCancel;var _this$state=this.state,scenes=_this$state.scenes,layout=_this$state.layout,progress=_this$state.progress,floatingHeaderHeights=_this$state.floatingHeaderHeights;var focusedRoute=state.routes[state.index];var focusedDescriptor=descriptors[focusedRoute.key];var focusedOptions=focusedDescriptor?focusedDescriptor.options:{};var defaultTransitionPreset=mode==='modal'?ModalTransition:DefaultTransition;if(headerMode==='screen'){defaultTransitionPreset=_objectSpread({},defaultTransitionPreset,{headerStyleInterpolator:forNoAnimation});}return React.createElement(React.Fragment,{__source:{fileName:_jsxFileName,lineNumber:325}},React.createElement(MaybeScreenContainer,{enabled:mode!=='modal',style:styles.container,onLayout:this.handleLayout,__source:{fileName:_jsxFileName,lineNumber:326}},routes.map(function(route,index,self){var focused=focusedRoute.key===route.key;var current=progress[route.key];var scene=scenes[index];var descriptor=scene.descriptor;var next=self[index+1]?progress[self[index+1].key]:ANIMATED_ONE;var isScreenActive=index===self.length-1?1:Platform.OS==='android'?cond(eq(next,1),0,1):index===self.length-2?1:0;var _ref6=descriptor?descriptor.options:{},header=_ref6.header,headerTransparent=_ref6.headerTransparent,cardTransparent=_ref6.cardTransparent,cardShadowEnabled=_ref6.cardShadowEnabled,cardOverlayEnabled=_ref6.cardOverlayEnabled,cardStyle=_ref6.cardStyle,gestureResponseDistance=_ref6.gestureResponseDistance,_ref6$gestureDirectio=_ref6.gestureDirection,gestureDirection=_ref6$gestureDirectio===void 0?defaultTransitionPreset.gestureDirection:_ref6$gestureDirectio,_ref6$transitionSpec=_ref6.transitionSpec,transitionSpec=_ref6$transitionSpec===void 0?defaultTransitionPreset.transitionSpec:_ref6$transitionSpec,_ref6$cardStyleInterp=_ref6.cardStyleInterpolator,cardStyleInterpolator=_ref6$cardStyleInterp===void 0?defaultTransitionPreset.cardStyleInterpolator:_ref6$cardStyleInterp,_ref6$headerStyleInte=_ref6.headerStyleInterpolator,headerStyleInterpolator=_ref6$headerStyleInte===void 0?defaultTransitionPreset.headerStyleInterpolator:_ref6$headerStyleInte;return React.createElement(MaybeScreen,{key:route.key,style:StyleSheet.absoluteFill,enabled:mode!=='modal',active:isScreenActive,pointerEvents:\"box-none\",__source:{fileName:_jsxFileName,lineNumber:367}},React.createElement(StackItem,{index:index,active:index===self.length-1,focused:focused,closing:closingRoutes.includes(route.key),layout:layout,current:current,scene:scene,previousScene:scenes[index-1],navigation:navigation,state:state,cardTransparent:cardTransparent,cardOverlayEnabled:cardOverlayEnabled,cardShadowEnabled:cardShadowEnabled,cardStyle:cardStyle,gestureEnabled:index!==0&&getGesturesEnabled({route:route}),onPageChangeStart:onPageChangeStart,onPageChangeConfirm:onPageChangeConfirm,onPageChangeCancel:onPageChangeCancel,gestureResponseDistance:gestureResponseDistance,floatingHeaderHeight:floatingHeaderHeights[route.key],hasCustomHeader:header===null,getPreviousRoute:getPreviousRoute,headerMode:headerMode,headerTransparent:headerTransparent,renderHeader:renderHeader,renderScene:renderScene,onOpenRoute:onOpenRoute,onCloseRoute:onCloseRoute,onTransitionStart:_this2.handleTransitionStart,onTransitionEnd:_this2.handleTransitionEnd,onGoBack:onGoBack,gestureDirection:gestureDirection,transitionSpec:transitionSpec,cardStyleInterpolator:cardStyleInterpolator,headerStyleInterpolator:headerStyleInterpolator,__source:{fileName:_jsxFileName,lineNumber:374}}));})),headerMode==='float'?renderHeader({mode:'float',layout:layout,scenes:scenes,state:state,getPreviousRoute:getPreviousRoute,onContentHeightChange:this.handleFloatingHeaderLayout,styleInterpolator:focusedOptions.headerStyleInterpolator!==undefined?focusedOptions.headerStyleInterpolator:defaultTransitionPreset.headerStyleInterpolator,style:styles.floating}):null);}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.routes===state.routes&&props.descriptors===state.descriptors){return null;}var progress=props.routes.reduce(function(acc,curr){var descriptor=props.descriptors[curr.key];acc[curr.key]=state.progress[curr.key]||new Animated.Value(props.openingRoutes.includes(curr.key)&&descriptor&&descriptor.options.animationEnabled!==false?0:1);return acc;},{});return{routes:props.routes,scenes:props.routes.map(function(route,index,self){var previousRoute=self[index-1];var nextRoute=self[index+1];var current=progress[route.key];var previous=previousRoute?progress[previousRoute.key]:undefined;var next=nextRoute?progress[nextRoute.key]:undefined;var oldScene=state.scenes[index];var scene={route:route,previous:previousRoute,descriptor:props.descriptors[route.key]||state.descriptors[route.key]||(oldScene?oldScene.descriptor:FALLBACK_DESCRIPTOR),progress:{current:current,next:next,previous:previous}};if(oldScene&&scene.route===oldScene.route&&scene.progress.current===oldScene.progress.current&&scene.progress.next===oldScene.progress.next&&scene.progress.previous===oldScene.progress.previous&&scene.descriptor===oldScene.descriptor){return oldScene;}return scene;}),progress:progress,descriptors:props.descriptors,floatingHeaderHeights:getFloatingHeaderHeights(props.routes,state.layout,state.floatingHeaderHeights)};}}]);return Stack;}(React.Component);export{Stack as default};var styles=StyleSheet.create({container:{flex:1,overflow:'hidden'},floating:{position:'absolute',top:0,left:0,right:0}});","map":{"version":3,"sources":["/home/rick/dev/cool-home/node_modules/@react-navigation/stack/lib/module/views/Stack/Stack.js"],"names":["_defineProperty","_classCallCheck","_createClass","_possibleConstructorReturn","_getPrototypeOf","_inherits","_extends","_objectWithoutProperties","_jsxFileName","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","React","Animated","Screens","getDefaultHeaderHeight","StackItem","DefaultTransition","ModalTransition","forNoAnimation","dimensions","Dimensions","get","layout","width","height","AnimatedScreen","MaybeScreenContainer","_ref","enabled","rest","Platform","OS","screensEnabled","createElement","ScreenContainer","__source","fileName","lineNumber","View","MaybeScreen","_ref2","active","createAnimatedComponent","NativeScreen","cond","eq","ANIMATED_ONE","Value","FALLBACK_DESCRIPTOR","freeze","options","getFloatingHeaderHeights","routes","previous","defaultHeaderHeight","reduce","acc","curr","Stack","_React$Component","_getPrototypeOf2","_this","_len","args","Array","_key","call","concat","state","scenes","progress","descriptors","props","floatingHeaderHeights","handleLayout","e","_e$nativeEvent$layout","nativeEvent","setState","handleFloatingHeaderLayout","_ref3","route","previousHeight","handleTransitionStart","_ref4","closing","navigation","emit","type","data","handleTransitionEnd","_ref5","value","render","_this2","_this$props","mode","closingRoutes","onOpenRoute","onCloseRoute","onGoBack","getPreviousRoute","getGesturesEnabled","renderHeader","renderScene","headerMode","onPageChangeStart","onPageChangeConfirm","onPageChangeCancel","_this$state","focusedRoute","index","focusedDescriptor","focusedOptions","defaultTransitionPreset","headerStyleInterpolator","Fragment","style","styles","container","onLayout","map","self","focused","current","scene","descriptor","next","isScreenActive","_ref6","header","headerTransparent","cardTransparent","cardShadowEnabled","cardOverlayEnabled","cardStyle","gestureResponseDistance","_ref6$gestureDirectio","gestureDirection","_ref6$transitionSpec","transitionSpec","_ref6$cardStyleInterp","cardStyleInterpolator","_ref6$headerStyleInte","StyleSheet","absoluteFill","pointerEvents","includes","previousScene","gestureEnabled","floatingHeaderHeight","hasCustomHeader","onTransitionStart","onTransitionEnd","onContentHeightChange","styleInterpolator","undefined","floating","getDerivedStateFromProps","openingRoutes","animationEnabled","previousRoute","nextRoute","oldScene","Component","default","create","flex","overflow","position","top","left","right"],"mappings":"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","sourcesContent":["import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";import _extends from\"@babel/runtime/helpers/extends\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";var _jsxFileName=\"/Users/osdnk/work/navigation-ex/packages/stack/src/views/Stack/Stack.tsx\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import*as React from'react';import{View,StyleSheet,Dimensions,Platform}from'react-native';import Animated from'react-native-reanimated';import*as Screens from'react-native-screens';import{getDefaultHeaderHeight}from'../Header/HeaderSegment';import StackItem from'./StackItem';import{DefaultTransition,ModalTransition}from'../../TransitionConfigs/TransitionPresets';import{forNoAnimation}from'../../TransitionConfigs/HeaderStyleInterpolators';var dimensions=Dimensions.get('window');var layout={width:dimensions.width,height:dimensions.height};var AnimatedScreen;var MaybeScreenContainer=function MaybeScreenContainer(_ref){var enabled=_ref.enabled,rest=_objectWithoutProperties(_ref,[\"enabled\"]);if(Platform.OS!=='ios'&&enabled&&Screens.screensEnabled()){return React.createElement(Screens.ScreenContainer,_extends({},rest,{__source:{fileName:_jsxFileName,lineNumber:84}}));}return React.createElement(View,_extends({},rest,{__source:{fileName:_jsxFileName,lineNumber:87}}));};var MaybeScreen=function MaybeScreen(_ref2){var enabled=_ref2.enabled,active=_ref2.active,rest=_objectWithoutProperties(_ref2,[\"enabled\",\"active\"]);if(Platform.OS!=='ios'&&enabled&&Screens.screensEnabled()){AnimatedScreen=AnimatedScreen||Animated.createAnimatedComponent(Screens.NativeScreen);return React.createElement(AnimatedScreen,_extends({active:active},rest,{__source:{fileName:_jsxFileName,lineNumber:103}}));}return React.createElement(View,_extends({},rest,{__source:{fileName:_jsxFileName,lineNumber:106}}));};var cond=Animated.cond,eq=Animated.eq;var ANIMATED_ONE=new Animated.Value(1);var FALLBACK_DESCRIPTOR=Object.freeze({options:{}});var getFloatingHeaderHeights=function getFloatingHeaderHeights(routes,layout,previous){var defaultHeaderHeight=getDefaultHeaderHeight(layout);return routes.reduce(function(acc,curr){acc[curr.key]=previous[curr.key]||defaultHeaderHeight;return acc;},{});};var Stack=function(_React$Component){_inherits(Stack,_React$Component);function Stack(){var _getPrototypeOf2;var _this;_classCallCheck(this,Stack);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Stack)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={routes:[],scenes:[],progress:{},layout:layout,descriptors:_this.props.descriptors,floatingHeaderHeights:{}};_this.handleLayout=function(e){var _e$nativeEvent$layout=e.nativeEvent.layout,height=_e$nativeEvent$layout.height,width=_e$nativeEvent$layout.width;if(height===_this.state.layout.height&&width===_this.state.layout.width){return;}var layout={width:width,height:height};_this.setState({layout:layout,floatingHeaderHeights:getFloatingHeaderHeights(_this.props.routes,layout,{})});};_this.handleFloatingHeaderLayout=function(_ref3){var route=_ref3.route,height=_ref3.height;var previousHeight=_this.state.floatingHeaderHeights[route.key];if(previousHeight&&previousHeight===height){return;}_this.setState(function(state){return{floatingHeaderHeights:_objectSpread({},state.floatingHeaderHeights,_defineProperty({},route.key,height))};});};_this.handleTransitionStart=function(_ref4,closing){var route=_ref4.route;return _this.props.navigation.emit({type:'transitionStart',data:{closing:closing},target:route.key});};_this.handleTransitionEnd=function(_ref5,closing){var route=_ref5.route;return _this.props.navigation.emit({type:'transitionEnd',data:{closing:closing},target:route.key});};return _this;}_createClass(Stack,[{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,mode=_this$props.mode,descriptors=_this$props.descriptors,state=_this$props.state,navigation=_this$props.navigation,routes=_this$props.routes,closingRoutes=_this$props.closingRoutes,onOpenRoute=_this$props.onOpenRoute,onCloseRoute=_this$props.onCloseRoute,onGoBack=_this$props.onGoBack,getPreviousRoute=_this$props.getPreviousRoute,getGesturesEnabled=_this$props.getGesturesEnabled,renderHeader=_this$props.renderHeader,renderScene=_this$props.renderScene,headerMode=_this$props.headerMode,onPageChangeStart=_this$props.onPageChangeStart,onPageChangeConfirm=_this$props.onPageChangeConfirm,onPageChangeCancel=_this$props.onPageChangeCancel;var _this$state=this.state,scenes=_this$state.scenes,layout=_this$state.layout,progress=_this$state.progress,floatingHeaderHeights=_this$state.floatingHeaderHeights;var focusedRoute=state.routes[state.index];var focusedDescriptor=descriptors[focusedRoute.key];var focusedOptions=focusedDescriptor?focusedDescriptor.options:{};var defaultTransitionPreset=mode==='modal'?ModalTransition:DefaultTransition;if(headerMode==='screen'){defaultTransitionPreset=_objectSpread({},defaultTransitionPreset,{headerStyleInterpolator:forNoAnimation});}return React.createElement(React.Fragment,{__source:{fileName:_jsxFileName,lineNumber:325}},React.createElement(MaybeScreenContainer,{enabled:mode!=='modal',style:styles.container,onLayout:this.handleLayout,__source:{fileName:_jsxFileName,lineNumber:326}},routes.map(function(route,index,self){var focused=focusedRoute.key===route.key;var current=progress[route.key];var scene=scenes[index];var descriptor=scene.descriptor;var next=self[index+1]?progress[self[index+1].key]:ANIMATED_ONE;var isScreenActive=index===self.length-1?1:Platform.OS==='android'?cond(eq(next,1),0,1):index===self.length-2?1:0;var _ref6=descriptor?descriptor.options:{},header=_ref6.header,headerTransparent=_ref6.headerTransparent,cardTransparent=_ref6.cardTransparent,cardShadowEnabled=_ref6.cardShadowEnabled,cardOverlayEnabled=_ref6.cardOverlayEnabled,cardStyle=_ref6.cardStyle,gestureResponseDistance=_ref6.gestureResponseDistance,_ref6$gestureDirectio=_ref6.gestureDirection,gestureDirection=_ref6$gestureDirectio===void 0?defaultTransitionPreset.gestureDirection:_ref6$gestureDirectio,_ref6$transitionSpec=_ref6.transitionSpec,transitionSpec=_ref6$transitionSpec===void 0?defaultTransitionPreset.transitionSpec:_ref6$transitionSpec,_ref6$cardStyleInterp=_ref6.cardStyleInterpolator,cardStyleInterpolator=_ref6$cardStyleInterp===void 0?defaultTransitionPreset.cardStyleInterpolator:_ref6$cardStyleInterp,_ref6$headerStyleInte=_ref6.headerStyleInterpolator,headerStyleInterpolator=_ref6$headerStyleInte===void 0?defaultTransitionPreset.headerStyleInterpolator:_ref6$headerStyleInte;return React.createElement(MaybeScreen,{key:route.key,style:StyleSheet.absoluteFill,enabled:mode!=='modal',active:isScreenActive,pointerEvents:\"box-none\",__source:{fileName:_jsxFileName,lineNumber:367}},React.createElement(StackItem,{index:index,active:index===self.length-1,focused:focused,closing:closingRoutes.includes(route.key),layout:layout,current:current,scene:scene,previousScene:scenes[index-1],navigation:navigation,state:state,cardTransparent:cardTransparent,cardOverlayEnabled:cardOverlayEnabled,cardShadowEnabled:cardShadowEnabled,cardStyle:cardStyle,gestureEnabled:index!==0&&getGesturesEnabled({route:route}),onPageChangeStart:onPageChangeStart,onPageChangeConfirm:onPageChangeConfirm,onPageChangeCancel:onPageChangeCancel,gestureResponseDistance:gestureResponseDistance,floatingHeaderHeight:floatingHeaderHeights[route.key],hasCustomHeader:header===null,getPreviousRoute:getPreviousRoute,headerMode:headerMode,headerTransparent:headerTransparent,renderHeader:renderHeader,renderScene:renderScene,onOpenRoute:onOpenRoute,onCloseRoute:onCloseRoute,onTransitionStart:_this2.handleTransitionStart,onTransitionEnd:_this2.handleTransitionEnd,onGoBack:onGoBack,gestureDirection:gestureDirection,transitionSpec:transitionSpec,cardStyleInterpolator:cardStyleInterpolator,headerStyleInterpolator:headerStyleInterpolator,__source:{fileName:_jsxFileName,lineNumber:374}}));})),headerMode==='float'?renderHeader({mode:'float',layout:layout,scenes:scenes,state:state,getPreviousRoute:getPreviousRoute,onContentHeightChange:this.handleFloatingHeaderLayout,styleInterpolator:focusedOptions.headerStyleInterpolator!==undefined?focusedOptions.headerStyleInterpolator:defaultTransitionPreset.headerStyleInterpolator,style:styles.floating}):null);}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.routes===state.routes&&props.descriptors===state.descriptors){return null;}var progress=props.routes.reduce(function(acc,curr){var descriptor=props.descriptors[curr.key];acc[curr.key]=state.progress[curr.key]||new Animated.Value(props.openingRoutes.includes(curr.key)&&descriptor&&descriptor.options.animationEnabled!==false?0:1);return acc;},{});return{routes:props.routes,scenes:props.routes.map(function(route,index,self){var previousRoute=self[index-1];var nextRoute=self[index+1];var current=progress[route.key];var previous=previousRoute?progress[previousRoute.key]:undefined;var next=nextRoute?progress[nextRoute.key]:undefined;var oldScene=state.scenes[index];var scene={route:route,previous:previousRoute,descriptor:props.descriptors[route.key]||state.descriptors[route.key]||(oldScene?oldScene.descriptor:FALLBACK_DESCRIPTOR),progress:{current:current,next:next,previous:previous}};if(oldScene&&scene.route===oldScene.route&&scene.progress.current===oldScene.progress.current&&scene.progress.next===oldScene.progress.next&&scene.progress.previous===oldScene.progress.previous&&scene.descriptor===oldScene.descriptor){return oldScene;}return scene;}),progress:progress,descriptors:props.descriptors,floatingHeaderHeights:getFloatingHeaderHeights(props.routes,state.layout,state.floatingHeaderHeights)};}}]);return Stack;}(React.Component);export{Stack as default};var styles=StyleSheet.create({container:{flex:1,overflow:'hidden'},floating:{position:'absolute',top:0,left:0,right:0}});\n//# sourceMappingURL=Stack.js.map"]},"metadata":{},"sourceType":"module"}